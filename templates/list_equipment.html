<!DOCTYPE html>
{% import 'wtf.html' as wtf %}


<html>
<head>
    <title>Equipment List</title>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<style>
    .delete-button {
      margin-left: 5px;
  }
</style>
</head>
<body>
{% extends 'basee.html' %}

{% block content %}
<div class="squeeze">
<h1>List of Equipment</h1>

<div class="table-container">
{% if equipment %}
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Room #</th>
      <th>Barcode</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for equip in equipment %}
      <tr>
        <td>{{ equip.id }}</td>
        <td>{{ equip.name }}</td>
        <td>{{ equip.room }}</td>
        <td>{{ equip.barcode }}</td>
        <td>
          <a href="{{ url_for('view_equipment', id=equip.id) }}"><i class="fas fa-eye"></i></a>
          {% if current_user.has_permission(CAN_ADD_EQUIPMENT) %}
          <a href="#" class="delete-button" onclick="event.preventDefault(); if (confirmDelete()) document.getElementById('delete-form-{{ equip.id }}').submit();"><i class="fas fa-trash-alt"></i></a>
          <form id="delete-form-{{ equip.id }}" action="{{ url_for('delete_equipment', id=equip.id) }}" method="POST" style="display: none;">
          <input type="hidden" name="_method" value="DELETE">
          </form>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No equipment added</p>
{% endif %}
</div>

{% if current_user.has_permission(CAN_ADD_EQUIPMENT) %}
    <a href="{{ url_for('new_equipment') }}" class="add-button">Add Equipment</a>
{% endif %}</div>

<script>
function confirmDelete() {
  return confirm('Are you sure you want to delete this piece of equipment?');
}
</script>

{% endblock %}

</body>
</html>